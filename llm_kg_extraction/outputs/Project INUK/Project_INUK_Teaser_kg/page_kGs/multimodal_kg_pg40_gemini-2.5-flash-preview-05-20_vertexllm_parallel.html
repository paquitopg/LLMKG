<html>
    <head>
        <meta charset="utf-8">
        
            <script>function neighbourhoodHighlight(params) {
  // console.log("in nieghbourhoodhighlight");
  allNodes = nodes.get({ returnType: "Object" });
  // originalNodes = JSON.parse(JSON.stringify(allNodes));
  // if something is selected:
  if (params.nodes.length > 0) {
    highlightActive = true;
    var i, j;
    var selectedNode = params.nodes[0];
    var degrees = 2;

    // mark all nodes as hard to read.
    for (let nodeId in allNodes) {
      // nodeColors[nodeId] = allNodes[nodeId].color;
      allNodes[nodeId].color = "rgba(200,200,200,0.5)";
      if (allNodes[nodeId].hiddenLabel === undefined) {
        allNodes[nodeId].hiddenLabel = allNodes[nodeId].label;
        allNodes[nodeId].label = undefined;
      }
    }
    var connectedNodes = network.getConnectedNodes(selectedNode);
    var allConnectedNodes = [];

    // get the second degree nodes
    for (i = 1; i < degrees; i++) {
      for (j = 0; j < connectedNodes.length; j++) {
        allConnectedNodes = allConnectedNodes.concat(
          network.getConnectedNodes(connectedNodes[j])
        );
      }
    }

    // all second degree nodes get a different color and their label back
    for (i = 0; i < allConnectedNodes.length; i++) {
      // allNodes[allConnectedNodes[i]].color = "pink";
      allNodes[allConnectedNodes[i]].color = "rgba(150,150,150,0.75)";
      if (allNodes[allConnectedNodes[i]].hiddenLabel !== undefined) {
        allNodes[allConnectedNodes[i]].label =
          allNodes[allConnectedNodes[i]].hiddenLabel;
        allNodes[allConnectedNodes[i]].hiddenLabel = undefined;
      }
    }

    // all first degree nodes get their own color and their label back
    for (i = 0; i < connectedNodes.length; i++) {
      // allNodes[connectedNodes[i]].color = undefined;
      allNodes[connectedNodes[i]].color = nodeColors[connectedNodes[i]];
      if (allNodes[connectedNodes[i]].hiddenLabel !== undefined) {
        allNodes[connectedNodes[i]].label =
          allNodes[connectedNodes[i]].hiddenLabel;
        allNodes[connectedNodes[i]].hiddenLabel = undefined;
      }
    }

    // the main node gets its own color and its label back.
    // allNodes[selectedNode].color = undefined;
    allNodes[selectedNode].color = nodeColors[selectedNode];
    if (allNodes[selectedNode].hiddenLabel !== undefined) {
      allNodes[selectedNode].label = allNodes[selectedNode].hiddenLabel;
      allNodes[selectedNode].hiddenLabel = undefined;
    }
  } else if (highlightActive === true) {
    // console.log("highlightActive was true");
    // reset all nodes
    for (let nodeId in allNodes) {
      // allNodes[nodeId].color = "purple";
      allNodes[nodeId].color = nodeColors[nodeId];
      // delete allNodes[nodeId].color;
      if (allNodes[nodeId].hiddenLabel !== undefined) {
        allNodes[nodeId].label = allNodes[nodeId].hiddenLabel;
        allNodes[nodeId].hiddenLabel = undefined;
      }
    }
    highlightActive = false;
  }

  // transform the object into an array
  var updateArray = [];
  if (params.nodes.length > 0) {
    for (let nodeId in allNodes) {
      if (allNodes.hasOwnProperty(nodeId)) {
        // console.log(allNodes[nodeId]);
        updateArray.push(allNodes[nodeId]);
      }
    }
    nodes.update(updateArray);
  } else {
    // console.log("Nothing was selected");
    for (let nodeId in allNodes) {
      if (allNodes.hasOwnProperty(nodeId)) {
        // console.log(allNodes[nodeId]);
        // allNodes[nodeId].color = {};
        updateArray.push(allNodes[nodeId]);
      }
    }
    nodes.update(updateArray);
  }
}

function filterHighlight(params) {
  allNodes = nodes.get({ returnType: "Object" });
  // if something is selected:
  if (params.nodes.length > 0) {
    filterActive = true;
    let selectedNodes = params.nodes;

    // hiding all nodes and saving the label
    for (let nodeId in allNodes) {
      allNodes[nodeId].hidden = true;
      if (allNodes[nodeId].savedLabel === undefined) {
        allNodes[nodeId].savedLabel = allNodes[nodeId].label;
        allNodes[nodeId].label = undefined;
      }
    }

    for (let i=0; i < selectedNodes.length; i++) {
      allNodes[selectedNodes[i]].hidden = false;
      if (allNodes[selectedNodes[i]].savedLabel !== undefined) {
        allNodes[selectedNodes[i]].label = allNodes[selectedNodes[i]].savedLabel;
        allNodes[selectedNodes[i]].savedLabel = undefined;
      }
    }

  } else if (filterActive === true) {
    // reset all nodes
    for (let nodeId in allNodes) {
      allNodes[nodeId].hidden = false;
      if (allNodes[nodeId].savedLabel !== undefined) {
        allNodes[nodeId].label = allNodes[nodeId].savedLabel;
        allNodes[nodeId].savedLabel = undefined;
      }
    }
    filterActive = false;
  }

  // transform the object into an array
  var updateArray = [];
  if (params.nodes.length > 0) {
    for (let nodeId in allNodes) {
      if (allNodes.hasOwnProperty(nodeId)) {
        updateArray.push(allNodes[nodeId]);
      }
    }
    nodes.update(updateArray);
  } else {
    for (let nodeId in allNodes) {
      if (allNodes.hasOwnProperty(nodeId)) {
        updateArray.push(allNodes[nodeId]);
      }
    }
    nodes.update(updateArray);
  }
}

function selectNode(nodes) {
  network.selectNodes(nodes);
  neighbourhoodHighlight({ nodes: nodes });
  return nodes;
}

function selectNodes(nodes) {
  network.selectNodes(nodes);
  filterHighlight({nodes: nodes});
  return nodes;
}

function highlightFilter(filter) {
  let selectedNodes = []
  let selectedProp = filter['property']
  if (filter['item'] === 'node') {
    let allNodes = nodes.get({ returnType: "Object" });
    for (let nodeId in allNodes) {
      if (allNodes[nodeId][selectedProp] && filter['value'].includes((allNodes[nodeId][selectedProp]).toString())) {
        selectedNodes.push(nodeId)
      }
    }
  }
  else if (filter['item'] === 'edge'){
    let allEdges = edges.get({returnType: 'object'});
    // check if the selected property exists for selected edge and select the nodes connected to the edge
    for (let edge in allEdges) {
      if (allEdges[edge][selectedProp] && filter['value'].includes((allEdges[edge][selectedProp]).toString())) {
        selectedNodes.push(allEdges[edge]['from'])
        selectedNodes.push(allEdges[edge]['to'])
      }
    }
  }
  selectNodes(selectedNodes)
}</script>
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/vis-network/9.1.2/dist/dist/vis-network.min.css" integrity="sha512-WgxfT5LWjfszlPHXRmBWHkV2eceiWTOBvrKCNbdgDYTHrT2AeLCGbF4sZlZw3UMN3WtL0tGUoIAKsu8mllg/XA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
            <script src="https://cdnjs.cloudflare.com/ajax/libs/vis-network/9.1.2/dist/vis-network.min.js" integrity="sha512-LnvoEWDFrqGHlHmDD2101OrLcbsfkrzoSpvtSQtxK3RMnRV0eOkhhBN2dXHKRrUU8p2DGRTk35n4O8nWSVe1mQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
            
            
            
            
            
            

        
<center>
<h1></h1>
</center>

<!-- <link rel="stylesheet" href="../node_modules/vis/dist/vis.min.css" type="text/css" />
<script type="text/javascript" src="../node_modules/vis/dist/vis.js"> </script>-->
        <link
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6"
          crossorigin="anonymous"
        />
        <script
          src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"
          crossorigin="anonymous"
        ></script>


        <center>
          <h1></h1>
        </center>
        <style type="text/css">

             #mynetwork {
                 width: 100%;
                 height: 800px;
                 background-color: #ffffff;
                 border: 1px solid lightgray;
                 position: relative;
                 float: left;
             }

             

             

             
        </style>
    </head>


    <body>
        <div class="card" style="width: 100%">
            
            
            <div id="mynetwork" class="card-body"></div>
        </div>

        
        

        <script type="text/javascript">

              // initialize global variables.
              var edges;
              var nodes;
              var allNodes;
              var allEdges;
              var nodeColors;
              var originalNodes;
              var network;
              var container;
              var options, data;
              var filter = {
                  item : '',
                  property : '',
                  value : []
              };

              

              

              // This method is responsible for drawing the graph, returns the drawn network
              function drawGraph() {
                  var container = document.getElementById('mynetwork');

                  

                  // parsing and collecting nodes and edges from the python
                  nodes = new vis.DataSet([{"color": "#1f77b4", "id": "e1", "label": "Articque", "shape": "dot", "size": 15, "title": "ID: e1\u003cbr\u003eType: pekg:Company\u003cbr\u003ename: Articque"}, {"color": "#cccccc", "id": "e2", "label": "DDA \u0026 Company France SAS", "shape": "dot", "size": 15, "title": "ID: e2\u003cbr\u003eType: Financial Advisor\u003cbr\u003ename: DDA \u0026 Company France SAS\u003cbr\u003eroleInContext: Advisor"}, {"color": "#d62728", "id": "e3", "label": "Project INUK", "shape": "dot", "size": 15, "title": "ID: e3\u003cbr\u003eType: pekg:TransactionContext\u003cbr\u003econtextName: Project INUK\u003cbr\u003estatus: Strictly Private \u0026 Confidential\u003cbr\u003etypeSought: Sale"}, {"color": "#1f77b4", "id": "e4", "label": "ChapsVision", "shape": "dot", "size": 15, "title": "ID: e4\u003cbr\u003eType: pekg:Company\u003cbr\u003ename: ChapsVision"}, {"color": "#e377c2", "id": "e5", "label": "Location Intelligence market", "shape": "dot", "size": 15, "title": "ID: e5\u003cbr\u003eType: pekg:MarketContext\u003cbr\u003esegmentName: Location Intelligence market\u003cbr\u003echaracteristics: supported by solid drivers\u003cbr\u003ekeyDrivers: [\u0027Massive volume of real time location data generated by the ubiquity of smartphones, mobile and business applications\u0027, \u0027Increasing number of business intelligence and analytics tools supporting location data analysis\u0027, \u0027Greater interest and awareness from corporations in using location data to accurately identify consumer behavior\u0027, \u0027Technology maturing with innovative features to be used within organizations\u0027, \u0027Growing level of criticality assigned to several use cases of location intelligence platforms\u0027, \u0027Considerable democratization of LI applications shifting from restricted areas for technical experts to becoming accessible by any business user\u0027, \u0027ever-wider accessibility of geospatial data\u0027]"}, {"color": "#9467bd", "id": "e6", "label": "Location Intelligence Platform", "shape": "dot", "size": 15, "title": "ID: e6\u003cbr\u003eType: pekg:ProductOrService\u003cbr\u003ename: Location Intelligence Platform\u003cbr\u003ecategory: Software Platform\u003cbr\u003edescription: Used in business operations, experienced accelerated adoption across industries."}, {"color": "#9467bd", "id": "e7", "label": "GIS software", "shape": "dot", "size": 15, "title": "ID: e7\u003cbr\u003eType: pekg:ProductOrService\u003cbr\u003ename: GIS software\u003cbr\u003ecategory: Software"}, {"color": "#9467bd", "id": "e8", "label": "LI applications", "shape": "dot", "size": 15, "title": "ID: e8\u003cbr\u003eType: pekg:ProductOrService\u003cbr\u003ename: LI applications\u003cbr\u003ecategory: Software Application"}, {"color": "#8c564b", "id": "e9", "label": "real time location data", "shape": "dot", "size": 15, "title": "ID: e9\u003cbr\u003eType: pekg:Technology\u003cbr\u003ename: real time location data"}, {"color": "#8c564b", "id": "e10", "label": "smartphones", "shape": "dot", "size": 15, "title": "ID: e10\u003cbr\u003eType: pekg:Technology\u003cbr\u003ename: smartphones"}, {"color": "#8c564b", "id": "e11", "label": "mobile applications", "shape": "dot", "size": 15, "title": "ID: e11\u003cbr\u003eType: pekg:Technology\u003cbr\u003ename: mobile applications"}, {"color": "#8c564b", "id": "e12", "label": "business applications", "shape": "dot", "size": 15, "title": "ID: e12\u003cbr\u003eType: pekg:Technology\u003cbr\u003ename: business applications"}, {"color": "#8c564b", "id": "e13", "label": "business intelligence and analytics tools", "shape": "dot", "size": 15, "title": "ID: e13\u003cbr\u003eType: pekg:Technology\u003cbr\u003ename: business intelligence and analytics tools"}, {"color": "#8c564b", "id": "e14", "label": "location data", "shape": "dot", "size": 15, "title": "ID: e14\u003cbr\u003eType: pekg:Technology\u003cbr\u003ename: location data"}, {"color": "#8c564b", "id": "e15", "label": "geospatial data", "shape": "dot", "size": 15, "title": "ID: e15\u003cbr\u003eType: pekg:Technology\u003cbr\u003ename: geospatial data"}, {"color": "#ce6dbd", "id": "e16", "label": "Data Visualization", "shape": "dot", "size": 15, "title": "ID: e16\u003cbr\u003eType: pekg:UseCaseOrIndustry\u003cbr\u003ename: Data Visualization"}, {"color": "#ce6dbd", "id": "e17", "label": "Human Resources Management", "shape": "dot", "size": 15, "title": "ID: e17\u003cbr\u003eType: pekg:UseCaseOrIndustry\u003cbr\u003ename: Human Resources Management"}, {"color": "#ce6dbd", "id": "e18", "label": "Risk Management", "shape": "dot", "size": 15, "title": "ID: e18\u003cbr\u003eType: pekg:UseCaseOrIndustry\u003cbr\u003ename: Risk Management"}, {"color": "#ce6dbd", "id": "e19", "label": "Supply Chain Optimization", "shape": "dot", "size": 15, "title": "ID: e19\u003cbr\u003eType: pekg:UseCaseOrIndustry\u003cbr\u003ename: Supply Chain Optimization"}, {"color": "#ce6dbd", "id": "e20", "label": "Sales Optimization", "shape": "dot", "size": 15, "title": "ID: e20\u003cbr\u003eType: pekg:UseCaseOrIndustry\u003cbr\u003ename: Sales Optimization"}, {"color": "#ce6dbd", "id": "e21", "label": "Workforce Management", "shape": "dot", "size": 15, "title": "ID: e21\u003cbr\u003eType: pekg:UseCaseOrIndustry\u003cbr\u003ename: Workforce Management"}, {"color": "#ce6dbd", "id": "e22", "label": "Data Visualization/Mapping", "shape": "dot", "size": 15, "title": "ID: e22\u003cbr\u003eType: pekg:UseCaseOrIndustry\u003cbr\u003ename: Data Visualization/Mapping"}, {"color": "#ce6dbd", "id": "e23", "label": "Site Planning", "shape": "dot", "size": 15, "title": "ID: e23\u003cbr\u003eType: pekg:UseCaseOrIndustry\u003cbr\u003ename: Site Planning"}, {"color": "#ce6dbd", "id": "e24", "label": "Geomarketing", "shape": "dot", "size": 15, "title": "ID: e24\u003cbr\u003eType: pekg:UseCaseOrIndustry\u003cbr\u003ename: Geomarketing"}, {"color": "#ce6dbd", "id": "e25", "label": "Territory Management", "shape": "dot", "size": 15, "title": "ID: e25\u003cbr\u003eType: pekg:UseCaseOrIndustry\u003cbr\u003ename: Territory Management"}, {"color": "#ce6dbd", "id": "e26", "label": "Logistics Optimization", "shape": "dot", "size": 15, "title": "ID: e26\u003cbr\u003eType: pekg:UseCaseOrIndustry\u003cbr\u003ename: Logistics Optimization"}, {"color": "#ce6dbd", "id": "e27", "label": "Tracking", "shape": "dot", "size": 15, "title": "ID: e27\u003cbr\u003eType: pekg:UseCaseOrIndustry\u003cbr\u003ename: Tracking"}, {"color": "#ce6dbd", "id": "e28", "label": "Citizen Services", "shape": "dot", "size": 15, "title": "ID: e28\u003cbr\u003eType: pekg:UseCaseOrIndustry\u003cbr\u003ename: Citizen Services"}, {"color": "#ce6dbd", "id": "e29", "label": "IOT \u0026 Smart Cities", "shape": "dot", "size": 15, "title": "ID: e29\u003cbr\u003eType: pekg:UseCaseOrIndustry\u003cbr\u003ename: IOT \u0026 Smart Cities"}, {"color": "#ce6dbd", "id": "e30", "label": "Indoor Mapping", "shape": "dot", "size": 15, "title": "ID: e30\u003cbr\u003eType: pekg:UseCaseOrIndustry\u003cbr\u003ename: Indoor Mapping"}, {"color": "#ce6dbd", "id": "e31", "label": "Pricing Analysis", "shape": "dot", "size": 15, "title": "ID: e31\u003cbr\u003eType: pekg:UseCaseOrIndustry\u003cbr\u003ename: Pricing Analysis"}, {"color": "#e7969c", "id": "e32", "label": "Launch of first commercial GIS software", "shape": "dot", "size": 15, "title": "ID: e32\u003cbr\u003eType: pekg:HistoricalEvent\u003cbr\u003eeventName: Launch of first commercial GIS software\u003cbr\u003eeventType: Product Launch\u003cbr\u003edateOrYear: 1980s"}]);
                  edges = new vis.DataSet([{"arrows": "to", "from": "e1", "label": "isSubjectOf", "title": "pekg:isSubjectOf", "to": "e3"}, {"arrows": "to", "from": "e3", "label": "advisedBy", "title": "pekg:advisedBy", "to": "e2"}, {"arrows": "to", "from": "e3", "label": "eventInvolvesParty", "title": "pekg:eventInvolvesParty", "to": "e4"}, {"arrows": "to", "from": "e1", "label": "offers", "title": "pekg:offers", "to": "e6"}, {"arrows": "to", "from": "e1", "label": "offers", "title": "pekg:offers", "to": "e8"}, {"arrows": "to", "from": "e1", "label": "operatesIn", "title": "pekg:operatesIn", "to": "e5"}, {"arrows": "to", "from": "e6", "label": "targets", "title": "pekg:targets", "to": "e16"}, {"arrows": "to", "from": "e6", "label": "targets", "title": "pekg:targets", "to": "e17"}, {"arrows": "to", "from": "e6", "label": "targets", "title": "pekg:targets", "to": "e18"}, {"arrows": "to", "from": "e6", "label": "targets", "title": "pekg:targets", "to": "e19"}, {"arrows": "to", "from": "e6", "label": "targets", "title": "pekg:targets", "to": "e20"}, {"arrows": "to", "from": "e6", "label": "targets", "title": "pekg:targets", "to": "e21"}, {"arrows": "to", "from": "e6", "label": "targets", "title": "pekg:targets", "to": "e22"}, {"arrows": "to", "from": "e6", "label": "targets", "title": "pekg:targets", "to": "e23"}, {"arrows": "to", "from": "e6", "label": "targets", "title": "pekg:targets", "to": "e24"}, {"arrows": "to", "from": "e6", "label": "targets", "title": "pekg:targets", "to": "e25"}, {"arrows": "to", "from": "e6", "label": "targets", "title": "pekg:targets", "to": "e26"}, {"arrows": "to", "from": "e6", "label": "targets", "title": "pekg:targets", "to": "e27"}, {"arrows": "to", "from": "e6", "label": "targets", "title": "pekg:targets", "to": "e28"}, {"arrows": "to", "from": "e6", "label": "targets", "title": "pekg:targets", "to": "e29"}, {"arrows": "to", "from": "e6", "label": "targets", "title": "pekg:targets", "to": "e30"}, {"arrows": "to", "from": "e6", "label": "targets", "title": "pekg:targets", "to": "e31"}, {"arrows": "to", "from": "e6", "label": "usesTechnology", "title": "pekg:usesTechnology", "to": "e9"}, {"arrows": "to", "from": "e6", "label": "usesTechnology", "title": "pekg:usesTechnology", "to": "e10"}, {"arrows": "to", "from": "e6", "label": "usesTechnology", "title": "pekg:usesTechnology", "to": "e11"}, {"arrows": "to", "from": "e6", "label": "usesTechnology", "title": "pekg:usesTechnology", "to": "e12"}, {"arrows": "to", "from": "e6", "label": "usesTechnology", "title": "pekg:usesTechnology", "to": "e13"}, {"arrows": "to", "from": "e6", "label": "usesTechnology", "title": "pekg:usesTechnology", "to": "e14"}, {"arrows": "to", "from": "e6", "label": "usesTechnology", "title": "pekg:usesTechnology", "to": "e15"}, {"arrows": "to", "from": "e5", "label": "experiencedEvent", "title": "pekg:experiencedEvent", "to": "e32"}, {"arrows": "to", "from": "e5", "label": "usesTechnology", "title": "pekg:usesTechnology", "to": "e7"}]);

                  nodeColors = {};
                  allNodes = nodes.get({ returnType: "Object" });
                  for (nodeId in allNodes) {
                    nodeColors[nodeId] = allNodes[nodeId].color;
                  }
                  allEdges = edges.get({ returnType: "Object" });
                  // adding nodes and edges to the graph
                  data = {nodes: nodes, edges: edges};

                  var options = {"nodes": {"shape": "dot", "size": 18, "font": {"size": 14, "face": "Tahoma"}}, "edges": {"arrows": {"to": {"enabled": true, "scaleFactor": 0.7}}, "color": {"inherit": "from"}, "smooth": {"type": "continuous", "roundness": 0.2}, "font": {"size": 10, "align": "middle"}}, "physics": {"enabled": true, "barnesHut": {"gravitationalConstant": -30000, "centralGravity": 0.3, "springLength": 250, "springConstant": 0.04, "damping": 0.09}, "minVelocity": 0.75}, "interaction": {"hover": true, "tooltipDelay": 200, "multiselect": true}, "layout": {"hierarchical": false}};

                  


                  

                  network = new vis.Network(container, data, options);

                  

                  

                  


                  

                  return network;

              }
              drawGraph();
        </script>
    </body>
</html>