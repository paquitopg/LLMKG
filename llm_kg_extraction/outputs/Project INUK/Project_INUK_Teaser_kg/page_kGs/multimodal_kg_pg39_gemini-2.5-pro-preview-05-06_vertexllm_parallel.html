<html>
    <head>
        <meta charset="utf-8">
        
            <script>function neighbourhoodHighlight(params) {
  // console.log("in nieghbourhoodhighlight");
  allNodes = nodes.get({ returnType: "Object" });
  // originalNodes = JSON.parse(JSON.stringify(allNodes));
  // if something is selected:
  if (params.nodes.length > 0) {
    highlightActive = true;
    var i, j;
    var selectedNode = params.nodes[0];
    var degrees = 2;

    // mark all nodes as hard to read.
    for (let nodeId in allNodes) {
      // nodeColors[nodeId] = allNodes[nodeId].color;
      allNodes[nodeId].color = "rgba(200,200,200,0.5)";
      if (allNodes[nodeId].hiddenLabel === undefined) {
        allNodes[nodeId].hiddenLabel = allNodes[nodeId].label;
        allNodes[nodeId].label = undefined;
      }
    }
    var connectedNodes = network.getConnectedNodes(selectedNode);
    var allConnectedNodes = [];

    // get the second degree nodes
    for (i = 1; i < degrees; i++) {
      for (j = 0; j < connectedNodes.length; j++) {
        allConnectedNodes = allConnectedNodes.concat(
          network.getConnectedNodes(connectedNodes[j])
        );
      }
    }

    // all second degree nodes get a different color and their label back
    for (i = 0; i < allConnectedNodes.length; i++) {
      // allNodes[allConnectedNodes[i]].color = "pink";
      allNodes[allConnectedNodes[i]].color = "rgba(150,150,150,0.75)";
      if (allNodes[allConnectedNodes[i]].hiddenLabel !== undefined) {
        allNodes[allConnectedNodes[i]].label =
          allNodes[allConnectedNodes[i]].hiddenLabel;
        allNodes[allConnectedNodes[i]].hiddenLabel = undefined;
      }
    }

    // all first degree nodes get their own color and their label back
    for (i = 0; i < connectedNodes.length; i++) {
      // allNodes[connectedNodes[i]].color = undefined;
      allNodes[connectedNodes[i]].color = nodeColors[connectedNodes[i]];
      if (allNodes[connectedNodes[i]].hiddenLabel !== undefined) {
        allNodes[connectedNodes[i]].label =
          allNodes[connectedNodes[i]].hiddenLabel;
        allNodes[connectedNodes[i]].hiddenLabel = undefined;
      }
    }

    // the main node gets its own color and its label back.
    // allNodes[selectedNode].color = undefined;
    allNodes[selectedNode].color = nodeColors[selectedNode];
    if (allNodes[selectedNode].hiddenLabel !== undefined) {
      allNodes[selectedNode].label = allNodes[selectedNode].hiddenLabel;
      allNodes[selectedNode].hiddenLabel = undefined;
    }
  } else if (highlightActive === true) {
    // console.log("highlightActive was true");
    // reset all nodes
    for (let nodeId in allNodes) {
      // allNodes[nodeId].color = "purple";
      allNodes[nodeId].color = nodeColors[nodeId];
      // delete allNodes[nodeId].color;
      if (allNodes[nodeId].hiddenLabel !== undefined) {
        allNodes[nodeId].label = allNodes[nodeId].hiddenLabel;
        allNodes[nodeId].hiddenLabel = undefined;
      }
    }
    highlightActive = false;
  }

  // transform the object into an array
  var updateArray = [];
  if (params.nodes.length > 0) {
    for (let nodeId in allNodes) {
      if (allNodes.hasOwnProperty(nodeId)) {
        // console.log(allNodes[nodeId]);
        updateArray.push(allNodes[nodeId]);
      }
    }
    nodes.update(updateArray);
  } else {
    // console.log("Nothing was selected");
    for (let nodeId in allNodes) {
      if (allNodes.hasOwnProperty(nodeId)) {
        // console.log(allNodes[nodeId]);
        // allNodes[nodeId].color = {};
        updateArray.push(allNodes[nodeId]);
      }
    }
    nodes.update(updateArray);
  }
}

function filterHighlight(params) {
  allNodes = nodes.get({ returnType: "Object" });
  // if something is selected:
  if (params.nodes.length > 0) {
    filterActive = true;
    let selectedNodes = params.nodes;

    // hiding all nodes and saving the label
    for (let nodeId in allNodes) {
      allNodes[nodeId].hidden = true;
      if (allNodes[nodeId].savedLabel === undefined) {
        allNodes[nodeId].savedLabel = allNodes[nodeId].label;
        allNodes[nodeId].label = undefined;
      }
    }

    for (let i=0; i < selectedNodes.length; i++) {
      allNodes[selectedNodes[i]].hidden = false;
      if (allNodes[selectedNodes[i]].savedLabel !== undefined) {
        allNodes[selectedNodes[i]].label = allNodes[selectedNodes[i]].savedLabel;
        allNodes[selectedNodes[i]].savedLabel = undefined;
      }
    }

  } else if (filterActive === true) {
    // reset all nodes
    for (let nodeId in allNodes) {
      allNodes[nodeId].hidden = false;
      if (allNodes[nodeId].savedLabel !== undefined) {
        allNodes[nodeId].label = allNodes[nodeId].savedLabel;
        allNodes[nodeId].savedLabel = undefined;
      }
    }
    filterActive = false;
  }

  // transform the object into an array
  var updateArray = [];
  if (params.nodes.length > 0) {
    for (let nodeId in allNodes) {
      if (allNodes.hasOwnProperty(nodeId)) {
        updateArray.push(allNodes[nodeId]);
      }
    }
    nodes.update(updateArray);
  } else {
    for (let nodeId in allNodes) {
      if (allNodes.hasOwnProperty(nodeId)) {
        updateArray.push(allNodes[nodeId]);
      }
    }
    nodes.update(updateArray);
  }
}

function selectNode(nodes) {
  network.selectNodes(nodes);
  neighbourhoodHighlight({ nodes: nodes });
  return nodes;
}

function selectNodes(nodes) {
  network.selectNodes(nodes);
  filterHighlight({nodes: nodes});
  return nodes;
}

function highlightFilter(filter) {
  let selectedNodes = []
  let selectedProp = filter['property']
  if (filter['item'] === 'node') {
    let allNodes = nodes.get({ returnType: "Object" });
    for (let nodeId in allNodes) {
      if (allNodes[nodeId][selectedProp] && filter['value'].includes((allNodes[nodeId][selectedProp]).toString())) {
        selectedNodes.push(nodeId)
      }
    }
  }
  else if (filter['item'] === 'edge'){
    let allEdges = edges.get({returnType: 'object'});
    // check if the selected property exists for selected edge and select the nodes connected to the edge
    for (let edge in allEdges) {
      if (allEdges[edge][selectedProp] && filter['value'].includes((allEdges[edge][selectedProp]).toString())) {
        selectedNodes.push(allEdges[edge]['from'])
        selectedNodes.push(allEdges[edge]['to'])
      }
    }
  }
  selectNodes(selectedNodes)
}</script>
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/vis-network/9.1.2/dist/dist/vis-network.min.css" integrity="sha512-WgxfT5LWjfszlPHXRmBWHkV2eceiWTOBvrKCNbdgDYTHrT2AeLCGbF4sZlZw3UMN3WtL0tGUoIAKsu8mllg/XA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
            <script src="https://cdnjs.cloudflare.com/ajax/libs/vis-network/9.1.2/dist/vis-network.min.js" integrity="sha512-LnvoEWDFrqGHlHmDD2101OrLcbsfkrzoSpvtSQtxK3RMnRV0eOkhhBN2dXHKRrUU8p2DGRTk35n4O8nWSVe1mQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
            
            
            
            
            
            

        
<center>
<h1></h1>
</center>

<!-- <link rel="stylesheet" href="../node_modules/vis/dist/vis.min.css" type="text/css" />
<script type="text/javascript" src="../node_modules/vis/dist/vis.js"> </script>-->
        <link
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6"
          crossorigin="anonymous"
        />
        <script
          src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"
          crossorigin="anonymous"
        ></script>


        <center>
          <h1></h1>
        </center>
        <style type="text/css">

             #mynetwork {
                 width: 100%;
                 height: 800px;
                 background-color: #ffffff;
                 border: 1px solid lightgray;
                 position: relative;
                 float: left;
             }

             

             

             
        </style>
    </head>


    <body>
        <div class="card" style="width: 100%">
            
            
            <div id="mynetwork" class="card-body"></div>
        </div>

        
        

        <script type="text/javascript">

              // initialize global variables.
              var edges;
              var nodes;
              var allNodes;
              var allEdges;
              var nodeColors;
              var originalNodes;
              var network;
              var container;
              var options, data;
              var filter = {
                  item : '',
                  property : '',
                  value : []
              };

              

              

              // This method is responsible for drawing the graph, returns the drawn network
              function drawGraph() {
                  var container = document.getElementById('mynetwork');

                  

                  // parsing and collecting nodes and edges from the python
                  nodes = new vis.DataSet([{"color": "#1f77b4", "id": "e1", "label": "Articque", "shape": "dot", "size": 15, "title": "ID: e1\u003cbr\u003eType: pekg:Company\u003cbr\u003ename: Articque\u003cbr\u003edescription: Articque operates in the dynamic and sprawling Location Intelligence market..."}, {"color": "#cccccc", "id": "e2", "label": "DDA \u0026 Company France SAS", "shape": "dot", "size": 15, "title": "ID: e2\u003cbr\u003eType: Financial Advisor\u003cbr\u003ename: DDA \u0026 Company France SAS\u003cbr\u003eroleInContext: Advisor for Project Inuk"}, {"color": "#d62728", "id": "e3", "label": "Project Inuk", "shape": "dot", "size": 15, "title": "ID: e3\u003cbr\u003eType: pekg:TransactionContext\u003cbr\u003econtextName: Project Inuk\u003cbr\u003estatus: Ongoing\u003cbr\u003etransactionPerimeter: Articque"}, {"color": "#e377c2", "id": "e4", "label": "Location Intelligence (LI) market", "shape": "dot", "size": 15, "title": "ID: e4\u003cbr\u003eType: pekg:MarketContext\u003cbr\u003esegmentName: Location Intelligence (LI) market\u003cbr\u003egeography: worldwide\u003cbr\u003esizeInfo: $16.1Bn in 2022, expected to reach $51.3Bn by 2030\u003cbr\u003egrowthInfo: 15.6% CAGR over the period (2022-2030)\u003cbr\u003echaracteristics: robust and continued growth; dynamic and sprawling\u003cbr\u003esourceOfData: Forbes, Grand View Research, Management\u003cbr\u003ekeyDrivers: [\u0027Refine customer knowledge through geospatial insights\u0027, \u0027Leverage operational excellence through more accurate decision making\u0027, \u0027Enhance business data intelligence by bringing geography into business data\u0027, \u0027Improve grasp of business environment by blending multiple data sources\u0027]"}, {"color": "#ff7f0e", "id": "e5", "label": "Location Intelligence Market Size 2022 (2022)", "shape": "dot", "size": 15, "title": "ID: e5\u003cbr\u003eType: pekg:FinancialMetric\u003cbr\u003emetricName: Location Intelligence Market Size 2022\u003cbr\u003evalueString: $16.1Bn\u003cbr\u003efiscalPeriod: 2022\u003cbr\u003escope: worldwide\u003cbr\u003esourceNote: Forbes, Grand View Research, Management"}, {"color": "#ff7f0e", "id": "e6", "label": "Location Intelligence Market Size 2030 (Expected) ", "shape": "dot", "size": 15, "title": "ID: e6\u003cbr\u003eType: pekg:FinancialMetric\u003cbr\u003emetricName: Location Intelligence Market Size 2030 (Expected)\u003cbr\u003evalueString: $51.3Bn\u003cbr\u003efiscalPeriod: 2030\u003cbr\u003escope: worldwide\u003cbr\u003esourceNote: Forbes, Grand View Research, Management"}, {"color": "#ff7f0e", "id": "e7", "label": "Location Intelligence Market CAGR 2022-2030 (2022-", "shape": "dot", "size": 15, "title": "ID: e7\u003cbr\u003eType: pekg:FinancialMetric\u003cbr\u003emetricName: Location Intelligence Market CAGR 2022-2030\u003cbr\u003evalueString: 15.6%\u003cbr\u003efiscalPeriod: 2022-2030\u003cbr\u003esourceNote: Forbes, Grand View Research, Management"}, {"color": "#9467bd", "id": "e8", "label": "Location Intelligence (LI) solutions", "shape": "dot", "size": 15, "title": "ID: e8\u003cbr\u003eType: pekg:ProductOrService\u003cbr\u003ename: Location Intelligence (LI) solutions\u003cbr\u003ealias: [\u0027Location Intelligence platforms\u0027]\u003cbr\u003ecategory: Software Platform\u003cbr\u003edescription: Location Intelligence platforms are at the junction of several business discipline areas: Business Intelligence, Geographic Information System (GIS), Extract-Transform-Load, Consulting. Positioning diagram source: Management."}, {"color": "#8c564b", "id": "e9", "label": "Location Intelligence (LI)", "shape": "dot", "size": 15, "title": "ID: e9\u003cbr\u003eType: pekg:Technology\u003cbr\u003ename: Location Intelligence (LI)\u003cbr\u003edescription: Technology that unlocks and fuels business possibilities by refining customer knowledge through geospatial insights, leveraging operational excellence, enhancing business data intelligence by bringing geography into business data, and improving grasp of business environment by blending multiple data sources."}, {"color": "#ce6dbd", "id": "e10", "label": "Business Intelligence (BI)", "shape": "dot", "size": 15, "title": "ID: e10\u003cbr\u003eType: pekg:UseCaseOrIndustry\u003cbr\u003ename: Business Intelligence (BI)\u003cbr\u003edescription: LI solutions provide valuable decision-support software enabling corporate users to analyze and anticipate key trends in their business with dynamic reports."}, {"color": "#ce6dbd", "id": "e11", "label": "Geographic Information System (GIS)", "shape": "dot", "size": 15, "title": "ID: e11\u003cbr\u003eType: pekg:UseCaseOrIndustry\u003cbr\u003ename: Geographic Information System (GIS)\u003cbr\u003edescription: LI solutions provide unique capabilities contributing a GIS layer on top of business data."}, {"color": "#ce6dbd", "id": "e12", "label": "Extract-Transform-Load (ETL)", "shape": "dot", "size": 15, "title": "ID: e12\u003cbr\u003eType: pekg:UseCaseOrIndustry\u003cbr\u003ename: Extract-Transform-Load (ETL)\u003cbr\u003edescription: LI solutions provide data collection, parsing and dissemination capabilities. Indicated as \u0027Ongoing Development\u0027 in the positioning diagram."}, {"color": "#ce6dbd", "id": "e13", "label": "Consulting", "shape": "dot", "size": 15, "title": "ID: e13\u003cbr\u003eType: pekg:UseCaseOrIndustry\u003cbr\u003ename: Consulting\u003cbr\u003edescription: LI solutions create a wealth of new opportunities across a wide range of consulting applications including market analysis, site selection, observatories, and more..."}, {"color": "#1f77b4", "id": "e14", "label": "Forbes", "shape": "dot", "size": 15, "title": "ID: e14\u003cbr\u003eType: pekg:Company\u003cbr\u003ename: Forbes\u003cbr\u003edescription: Source for Location Intelligence Market data."}, {"color": "#1f77b4", "id": "e15", "label": "Grand View Research", "shape": "dot", "size": 15, "title": "ID: e15\u003cbr\u003eType: pekg:Company\u003cbr\u003ename: Grand View Research\u003cbr\u003edescription: Source for Location Intelligence Market data."}, {"color": "#1f77b4", "id": "e16", "label": "Management", "shape": "dot", "size": 15, "title": "ID: e16\u003cbr\u003eType: pekg:Company\u003cbr\u003ename: Management\u003cbr\u003edescription: Source for Location Intelligence Market data and Positioning of Location Intelligence diagram."}, {"color": "#1f77b4", "id": "e17", "label": "ChapsVision", "shape": "dot", "size": 15, "title": "ID: e17\u003cbr\u003eType: pekg:Company\u003cbr\u003ename: ChapsVision\u003cbr\u003edescription: Mentioned in relation to Project Inuk in the footer."}]);
                  edges = new vis.DataSet([{"arrows": "to", "from": "e1", "label": "operatesIn", "title": "pekg:operatesIn", "to": "e4"}, {"arrows": "to", "from": "e4", "label": "reportsFinancialMetric", "title": "pekg:reportsFinancialMetric", "to": "e5"}, {"arrows": "to", "from": "e4", "label": "reportsFinancialMetric", "title": "pekg:reportsFinancialMetric", "to": "e6"}, {"arrows": "to", "from": "e4", "label": "reportsFinancialMetric", "title": "pekg:reportsFinancialMetric", "to": "e7"}, {"arrows": "to", "from": "e1", "label": "isSubjectOf", "title": "pekg:isSubjectOf", "to": "e3"}, {"arrows": "to", "from": "e3", "label": "advisedBy", "title": "pekg:advisedBy", "to": "e2"}, {"arrows": "to", "from": "e8", "label": "targets", "title": "pekg:targets", "to": "e10"}, {"arrows": "to", "from": "e8", "label": "targets", "title": "pekg:targets", "to": "e11"}, {"arrows": "to", "from": "e8", "label": "targets", "title": "pekg:targets", "to": "e12"}, {"arrows": "to", "from": "e8", "label": "targets", "title": "pekg:targets", "to": "e13"}, {"arrows": "to", "from": "e1", "label": "offers", "title": "pekg:offers", "to": "e8"}, {"arrows": "to", "from": "e8", "label": "usesTechnology", "title": "pekg:usesTechnology", "to": "e9"}, {"arrows": "to", "from": "e1", "label": "usesTechnology", "title": "pekg:usesTechnology", "to": "e9"}, {"arrows": "to", "from": "e3", "label": "eventInvolvesParty", "title": "pekg:eventInvolvesParty", "to": "e17"}]);

                  nodeColors = {};
                  allNodes = nodes.get({ returnType: "Object" });
                  for (nodeId in allNodes) {
                    nodeColors[nodeId] = allNodes[nodeId].color;
                  }
                  allEdges = edges.get({ returnType: "Object" });
                  // adding nodes and edges to the graph
                  data = {nodes: nodes, edges: edges};

                  var options = {"nodes": {"shape": "dot", "size": 18, "font": {"size": 14, "face": "Tahoma"}}, "edges": {"arrows": {"to": {"enabled": true, "scaleFactor": 0.7}}, "color": {"inherit": "from"}, "smooth": {"type": "continuous", "roundness": 0.2}, "font": {"size": 10, "align": "middle"}}, "physics": {"enabled": true, "barnesHut": {"gravitationalConstant": -30000, "centralGravity": 0.3, "springLength": 250, "springConstant": 0.04, "damping": 0.09}, "minVelocity": 0.75}, "interaction": {"hover": true, "tooltipDelay": 200, "multiselect": true}, "layout": {"hierarchical": false}};

                  


                  

                  network = new vis.Network(container, data, options);

                  

                  

                  


                  

                  return network;

              }
              drawGraph();
        </script>
    </body>
</html>